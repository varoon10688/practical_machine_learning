setwd("C:/Work/PISTON_COOLING/GENX/Vhb_rev_134_templug")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
# heat_transfer <- read.table("heat_transfer.out", sep =" ", skip =3)
# colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA %% 360, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
# heat_transfer <- read.table("heat_transfer.out", sep =" ", skip =3)
# colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_transfer.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_transfer.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_transfer.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
plot(heat_transfer$CA, heat_transfer$Heat_Transfer, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Heat Transfer")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_rejection.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
plot(heat_transfer$CA, heat_transfer$Heat_Transfer, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Heat Transfer")
setwd("U:/ecowork/Varoon/Abaqus/input/TEMP/Excel")
source('~/.active-rstudio-document', echo=TRUE)
filename
filelist
filelist[60]
filelist[61]
setwd("U:/ecowork/Varoon/Abaqus/input/TEMP/Excel/New")
filelist <- list.files( "./",full.names = T)
filelist
filelist <- list.files( "./",full.names = T)
len <- length(filelist)
i <- 1
while (i<=len)
{
filename <- sub(".*/","",filelist[i])
names <- sub(".txt","",sub(".*/","",filelist[i]))
text1<- read.table(filename, sep = ",")
text1[,2] <- seq(1,length(text1$V1))
x <- grep("x", text1$V1)
y <- grep("y", text1$V1)
z <- grep("z", text1$V1)
htc <- grep("htc", text1$V1)
temp <- grep("fluid", text1$V1)
map <-  data.frame(matrix(ncol = 8, nrow = y-2-x))
map[,1] <- subset(text1$V1, text1$V2 > x & text1$V2 <y-1) ## x valuesH
map[,2] <- subset(text1$V1, text1$V2 > y & text1$V2 <z-1) ## y values
map[,3] <- subset(text1$V1, text1$V2 > z & text1$V2 <htc-1) ## Z values
map[,4] <- subset(text1$V1, text1$V2 > htc & text1$V2 <temp-1) ## htc values
map[,5] <- subset(text1$V1, text1$V2 > x & text1$V2 <y-1) ## x values
map[,6] <- subset(text1$V1, text1$V2 > y & text1$V2 <z-1) ## y values
map[,7] <- subset(text1$V1, text1$V2 > z & text1$V2 <htc-1) ## Z values
map[,8] <- subset(text1$V1, text1$V2 > temp & text1$V2 <2*temp-htc-1) ## temp values
colnames(map) <- c("x","y","z","htc","x","y","z","fluid-temp")
write.csv(map, file =paste(names,".csv",sep =""))
i <- i+1
}
setwd("C:/Work/PISTON_COOLING/GENX/Vhb_rev_134_templug")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_rejection.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
plot(heat_transfer$CA, heat_transfer$Heat_Transfer, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Heat Transfer")
setwd("C:/Work/PISTON_COOLING/GENX/Vhb_rev_134_templug")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_rejection.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
plot(heat_transfer$CA, heat_transfer$Heat_Transfer, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Heat Transfer")
ls -l
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_rejection.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
plot(heat_transfer$CA, heat_transfer$Heat_Transfer, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Heat Transfer")
main_fill <- read.table("main_fill_ratio.out", sep =" ", skip =3)
colnames(main_fill) <- c("CA", "Main_Fill_Ratio")
center_fill <- read.table("center_fill_ratio.out", sep =" ", skip =3)
colnames(center_fill) <- c("CA", "Center_Fill_Ratio")
# mass_out <- read.table("mass_out.out", sep =" ", skip =3)
# colnames(mass_out) <- c("CA", "Mass_Outlet")
# mass_in <- read.table("massin.out", sep =" ", skip =3)
# colnames(mass_in) <- c("CA", "Mass_Inlet")
heat_transfer <- read.table("heat_rejection.out", sep =" ", skip =3)
colnames(heat_transfer) <- c("CA", "Heat_Transfer")
# mass_data <- merge(mass_out, main_fill, by.x =c("CA","CA"))
# mass_data <- merge(mass_data, heat_transfer, by.x =c("CA","CA"))
#
# plot(mass_data$CA, mass_data$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
# par(new =T)
# plot(mass_data$CA, -mass_data$Mass_Outlet, col = "deepskyblue4", axes =F,xlab =NA, ylab =NA, type ="l", lwd =2)
# axis(side =4)
# mtext(side =4, " Outlet Mass Flow Rate (kg/sec)")
# legend("topleft", col =c("darkorange2","deepskyblue4"), pch =c(19,19),xjust =0.5,legend =c("Main Fill Ratio","Outlet Mass Flowrate"), bty ="n")
plot(main_fill$CA, main_fill$Main_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Main Fill Ratio")
plot(center_fill$CA, center_fill$Center_Fill_Ratio, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Center Fill Ratio")
plot(heat_transfer$CA, heat_transfer$Heat_Transfer, col ="darkorange2", xlab = "Crank Angle (deg)", ylab ="Heat Transfer")
setwd("C:/Users/varoon.shankar/Desktop/Practical Machine Learning")
install.packages("caret")
install.packages("dplyr")
install.packages("randomForest")
install.packages("doParallel")
library(caret)
library(lattice)
library(ggplot2)
library(caret)
set.seed(10)
library(randomForest)
library(doParallel)
cl <- makeCluster(detectCores())
registerDoParallel(cl)
cl
testing <- read.csv("pml-testing.csv",na.strings = c("NA", ""))
data <- read.csv("pml-training.csv",na.strings = c("NA", ""))
inTrain = createDataPartition(y=data$classe, p=0.6, list=FALSE)
training = data[inTrain,]
testing = data[-inTrain,]
na_train = sapply(training, function(x) {sum(is.na(x))})
table(na_train)
good_columns = (names(na_train[na_train==0]))
training = training[, names(training) %in% good_columns]
training = training[,-c(1:7)]
model = train(classe~., method="rf", data=training)
install.packages("e1071")
model = train(classe~., method="rf", data=training)
install.packages("rattle")
library(rattle)
fancyRpartPlot(model$finalModel)
model
library(rattle)
fancyRpartPlot(model$finalModel)
plot(model$finalModel, uniform = TRUE)
model$finalModel
warnings()
library(caret)
library(lattice)
library(ggplot2)
library(randomForest)
set.seed(0)
library(rattle)
library(doParallel)
cl <- makeCluster(detectCores())
registerDoParallel(cl)
testing <- read.csv("pml-testing.csv",na.strings = c("NA", ""))
data <- read.csv("pml-training.csv",na.strings = c("NA", ""))
inTrain = createDataPartition(y=data$classe, p=0.6, list=FALSE)
training = data[inTrain,]
testing = data[-inTrain,]
na_train = sapply(training, function(x) {sum(is.na(x))})
table(na_train)
good_columns = (names(na_train[na_train==0]))
training = training[, names(training) %in% good_columns]
training = training[,-c(1:7)]
model = train(classe~., method="rf", data=training)
fancyRpartPlot(model$finalModel)
plot(model$finalModel, uniform = TRUE)
